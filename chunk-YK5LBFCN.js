import{a as pe}from"./chunk-VDBEX6S4.js";import{a as re}from"./chunk-VH5G3TBU.js";import{O as E,Z as ce,ja as de,la as ue,ma as me,t as z,v,w as k,z as le}from"./chunk-WRYUIXCZ.js";import{$b as h,Aa as _,Bc as U,Dc as G,Fa as B,Fb as f,Ib as w,Ic as Z,Kb as I,Lb as q,Nb as W,Nc as p,Ob as Q,Pb as A,Pc as J,Qb as a,Rb as l,Rc as ee,Sb as D,Sc as s,Tc as te,Vc as ne,Wc as ie,Y as P,Ya as H,Yb as Y,Za as y,Zb as N,bc as m,ca as u,cc as M,dc as T,hc as $,ia as C,ic as K,ja as x,jc as L,kb as j,kc as X,ob as S,oc as g,pc as V,pd as oe,qc as R,sa as b,td as se,ub as O,xd as ae}from"./chunk-FOI5FY2M.js";var fe=z("relative inline-block w-full"),he=z('flex w-full justify-between gap-2 rounded-md border border-input bg-transparent px-3 shadow-xs transition-[color,box-shadow] outline-none cursor-pointer disabled:cursor-not-allowed disabled:opacity-50 data-placeholder:text-muted-foreground [&_svg:not([class*="text-"])]:text-muted-foreground dark:bg-input/30 dark:hover:bg-input/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*="size-"])]:size-4',{variants:{zSize:{sm:"min-h-8 py-1 text-xs",default:"min-h-9 py-1.5 text-sm",lg:"min-h-10 py-2 text-base"}},defaultVariants:{zSize:"default"}}),ge=z("z-9999 min-w-full overflow-y-auto rounded-md border bg-popover text-popover-foreground shadow-lg animate-in fade-in-0 zoom-in-95"),ve=z('relative flex min-w-full cursor-pointer text-nowrap items-center gap-2 rounded-sm mb-0.5 py-1.5 pr-8 pl-2 text-sm outline-hidden select-none hover:bg-accent hover:text-accent-foreground data-selected:bg-accent data-selected:text-accent-foreground data-disabled:pointer-events-none data-disabled:opacity-50 data-disabled:cursor-not-allowed data-disabled:hover:bg-transparent data-disabled:hover:text-current [&_svg:not([class*="text-"])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*="size-"])]:size-4');var Ce=["*"];function xe(o,c){o&1&&(a(0,"span",0),D(1,"z-icon",2),l())}var F=(()=>{class o{zValue=s.required();zDisabled=s(!1,{transform:k});class=s("");select=b(null);elementRef=u(_);label=J(()=>{let e=this.elementRef?.nativeElement;return(e?.textContent??e?.innerText)?.trim()??""});classes=p(()=>v(ve(),this.class()));isSelected=p(()=>this.select()?.selectedValue().includes(this.zValue()));setSelectHost(e){this.select.set(e)}onClick(){this.zDisabled()||this.select()?.selectItem(this.zValue(),this.label())}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=S({type:o,selectors:[["z-select-item"],["","z-select-item",""]],hostAttrs:["role","option","tabindex","-1"],hostVars:6,hostBindings:function(t,n){t&1&&h("click",function(){return n.onClick()}),t&2&&(f("value",n.zValue())("data-disabled",n.zDisabled()?"":null)("data-selected",n.isSelected()?"":null)("aria-selected",n.isSelected()),g(n.classes()))},inputs:{zValue:[1,"zValue"],zDisabled:[1,"zDisabled"],class:[1,"class"]},ngContentSelectors:Ce,decls:3,vars:1,consts:[[1,"absolute","right-2","flex","size-3.5","items-center","justify-center"],[1,"truncate"],["zType","check"]],template:function(t,n){t&1&&(M(),w(0,xe,2,0,"span",0),a(1,"span",1),T(2),l()),t&2&&I(n.isSelected()?0:-1)},dependencies:[E],encapsulation:2,changeDetection:0})}return o})();var _e=["dropdownTemplate"],Se=["*"],we=o=>({$implicit:o});function Ie(o,c){o&1&&Y(0)}function De(o,c){if(o&1&&O(0,Ie,1,0,"ng-container",6),o&2){let e=c.$implicit;m();let t=X(7);A("ngTemplateOutlet",t)("ngTemplateOutletContext",G(2,we,e))}}function Me(o,c){if(o&1&&(a(0,"span",4),V(1),l()),o&2){let e=m();y(),R(e.zPlaceholder())}}function Te(o,c){if(o&1&&(a(0,"z-badge",7)(1,"span",8),V(2),l()()),o&2){let e=m().$implicit;y(2),R(e)}}function Ve(o,c){if(o&1&&(a(0,"span",8),V(1),l()),o&2){let e=m().$implicit;y(),R(e)}}function Re(o,c){if(o&1&&w(0,Te,3,1,"z-badge",7)(1,Ve,2,1,"span",8),o&2){let e=m();I(e.zMultiple()?0:1)}}function ke(o,c){if(o&1){let e=N();a(0,"div",9),h("keydown",function(n){C(e);let i=m();return x(i.onDropdownKeydown(n))}),a(1,"div",10),T(2),l()()}if(o&2){let e=m();g(e.contentClasses()),f("data-state","open")}}var tt=(()=>{class o{elementRef=u(_);overlay=u(ue);overlayPositionBuilder=u(de);viewContainerRef=u(j);platformId=u(B);dropdownTemplate=te.required("dropdownTemplate");selectItems=ne(F);overlayRef;portal;class=s("");zDisabled=s(!1,{transform:k});zLabel=s("");zMaxLabelCount=s(1);zMultiple=s(!1);zPlaceholder=s("Select an option...");zSize=s("default");zValue=ie(this.zMultiple()?[]:"");zSelectionChange=ee();isOpen=b(!1);focusedIndex=b(-1);selectedLabels=p(()=>{let e=this.zValue();return this.zMultiple()&&Array.isArray(e)?this.provideLabelsForMultiselectMode(e):this.provideLabelForSingleSelectMode(e)});onChange=e=>{};onTouched=()=>{};classes=p(()=>v(fe(),this.class()));contentClasses=p(()=>v(ge()));triggerClasses=p(()=>v(he({zSize:this.zSize()}),this.class()));ngAfterContentInit(){for(let e of this.selectItems())e.setSelectHost({selectedValue:()=>this.zMultiple()?this.zValue():[this.zValue()],selectItem:(t,n)=>this.selectItem(t,n)})}ngOnDestroy(){this.destroyOverlay()}onDocumentClick(e){let t=e.target,n=this.elementRef.nativeElement.contains(t),i=this.overlayRef?.overlayElement?.contains(t);!n&&!i&&this.close()}onTriggerKeydown(e){switch(e.key){case"Enter":case" ":case"ArrowDown":case"ArrowUp":e.preventDefault(),this.isOpen()||this.open();break;case"Escape":this.isOpen()&&(e.preventDefault(),this.close());break}}onDropdownKeydown(e){let t=this.getSelectItems();switch(e.key){case"ArrowDown":e.preventDefault(),this.navigateItems(1,t);break;case"ArrowUp":e.preventDefault(),this.navigateItems(-1,t);break;case"Enter":case" ":e.preventDefault(),this.selectFocusedItem(t);break;case"Escape":e.preventDefault(),this.close(),this.focusButton();break;case"Home":e.preventDefault(),this.focusFirstItem(t);break;case"End":e.preventDefault(),this.focusLastItem(t);break}}toggle(){this.zDisabled()||(this.isOpen()?this.close():this.open())}selectItem(e,t){if(e==null||e===""){console.warn("Attempted to select item with invalid value:",{value:e,label:t});return}this.zValue.update(n=>Array.isArray(n)?n.includes(e)?n.filter(i=>i!==e):[...n,e]:e),this.onChange(e),this.zSelectionChange.emit(this.zValue()),this.zMultiple()||(this.close(),setTimeout(()=>{this.focusButton()},0))}provideLabelsForMultiselectMode(e){let t=e.length-this.zMaxLabelCount(),n=[],i=0;for(let d of e){let r=this.getMatchingItem(d);if(r&&(n.push(r.label()),i++),t&&this.zMaxLabelCount()&&i===this.zMaxLabelCount()){n.push(`${t} more item${t>1?"s":""} selected`);break}}return n}provideLabelForSingleSelectMode(e){let t=this.zLabel();if(t)return[t];let n=this.getMatchingItem(e);return n?[n.label()]:e?[e]:[]}open(){if(this.isOpen()||(this.overlayRef||this.createOverlay(),!this.overlayRef))return;let e=this.elementRef.nativeElement.offsetWidth||0;this.overlayRef.hasAttached()&&this.overlayRef.detach(),this.portal=new ce(this.dropdownTemplate(),this.viewContainerRef),this.overlayRef.attach(this.portal),this.overlayRef.updateSize({width:e}),this.isOpen.set(!0),this.determinePortalWidth(e),setTimeout(()=>{this.focusDropdown(),this.focusSelectedItem()},0)}close(){this.overlayRef?.hasAttached()&&this.overlayRef.detach(),this.isOpen.set(!1),this.focusedIndex.set(-1),this.onTouched()}getMatchingItem(e){return this.selectItems()?.find(t=>t.zValue()===e)}determinePortalWidth(e){if(!this.overlayRef||!this.overlayRef.hasAttached())return;let t=this.selectItems(),n=0;for(let r of t)n=Math.max(n,r.elementRef.nativeElement.scrollWidth);let i=this.elementRef.nativeElement.querySelector("button > span > span");if(le(i)&&t.length){let r=getComputedStyle(t[0].elementRef.nativeElement),be=Number.parseFloat(r.getPropertyValue("padding-left"))||0,ye=Number.parseFloat(r.getPropertyValue("padding-right"))||0;n+=be+ye}n=Math.max(n,e),this.overlayRef.updateSize({width:n}),this.overlayRef.updatePosition()}createOverlay(){if(!this.overlayRef&&ae(this.platformId))try{let e=this.overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:4},{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-4}]).withPush(!1),t=this.elementRef.nativeElement.offsetWidth||200;this.overlayRef=this.overlay.create({positionStrategy:e,hasBackdrop:!1,scrollStrategy:this.overlay.scrollStrategies.reposition(),width:t,maxHeight:384})}catch(e){console.error("Error creating overlay:",e)}}destroyOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=void 0)}getSelectItems(){if(!this.overlayRef?.hasAttached())return[];let e=this.overlayRef.overlayElement;return Array.from(e.querySelectorAll("z-select-item, [z-select-item]")).filter(t=>t.dataset.disabled===void 0)}navigateItems(e,t){if(t.length===0)return;let i=this.focusedIndex()+e;i<0?i=t.length-1:i>=t.length&&(i=0),this.focusedIndex.set(i),this.updateItemFocus(t,i)}selectFocusedItem(e){let t=this.focusedIndex();if(t>=0&&t<e.length){let n=e[t],i=n.getAttribute("value"),d=n.textContent?.trim()??"";if(i==null){console.warn("No value attribute found on selected item:",n);return}this.selectItem(i,d)}}focusFirstItem(e){e.length>0&&(this.focusedIndex.set(0),this.updateItemFocus(e,0))}focusLastItem(e){if(e.length>0){let t=e.length-1;this.focusedIndex.set(t),this.updateItemFocus(e,t)}}updateItemFocus(e,t){for(let n=0;n<e.length;n++){let i=e[n];n===t?(i.focus(),i.setAttribute("aria-selected","true")):i.removeAttribute("aria-selected")}}focusDropdown(){if(this.overlayRef?.hasAttached()){let e=this.overlayRef.overlayElement.querySelector('[role="listbox"]');e&&e.focus()}}focusButton(){let e=this.elementRef.nativeElement.querySelector("button");e&&e.focus()}focusSelectedItem(){let e=this.getSelectItems();if(e.length===0)return;let t=this.zValue(),n=-1;t&&(n=e.findIndex(i=>i.getAttribute("value")===t)),n===-1&&(n=0),this.focusedIndex.set(n),this.updateItemFocus(e,n)}writeValue(e){this.zMultiple()&&Array.isArray(e)?this.zValue.set(e):this.zValue.set(e??"")}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(){}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=S({type:o,selectors:[["z-select"],["","z-select",""]],contentQueries:function(t,n,i){t&1&&$(i,n.selectItems,F,4),t&2&&L()},viewQuery:function(t,n){t&1&&K(n.dropdownTemplate,_e,5),t&2&&L()},hostVars:4,hostBindings:function(t,n){t&1&&h("click",function(d){return n.onDocumentClick(d)},H),t&2&&(f("data-disabled",n.zDisabled()?"":null)("data-state",n.isOpen()?"open":"closed"),g(n.classes()))},inputs:{class:[1,"class"],zDisabled:[1,"zDisabled"],zLabel:[1,"zLabel"],zMaxLabelCount:[1,"zMaxLabelCount"],zMultiple:[1,"zMultiple"],zPlaceholder:[1,"zPlaceholder"],zSize:[1,"zSize"],zValue:[1,"zValue"]},outputs:{zValue:"zValueChange",zSelectionChange:"zSelectionChange"},features:[U([{provide:pe,useExisting:P(()=>o),multi:!0}])],ngContentSelectors:Se,decls:10,vars:8,consts:[["labelsTemplate",""],["dropdownTemplate",""],["type","button",3,"click","keydown","disabled"],[1,"flex","flex-1","flex-wrap","items-center","gap-2"],[1,"text-muted-foreground","truncate"],["zType","chevron-down","zSize","lg",1,"opacity-50"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["zType","secondary"],[1,"truncate"],["role","listbox","tabindex","-1",3,"keydown"],[1,"p-1"]],template:function(t,n){if(t&1){let i=N();M(),a(0,"button",2),h("click",function(){return C(i),x(n.toggle())})("keydown",function(r){return C(i),x(n.onTriggerKeydown(r))}),a(1,"span",3),W(2,De,1,4,"ng-container",null,q,!1,Me,2,1,"span",4),l(),D(5,"z-icon",5),l(),O(6,Re,2,1,"ng-template",null,0,Z)(8,ke,3,3,"ng-template",null,1,Z)}if(t&2){g(n.triggerClasses()),A("disabled",n.zDisabled()),f("aria-expanded",n.isOpen())("aria-haspopup","listbox")("data-state",n.isOpen()?"open":"closed")("data-placeholder",n.zValue()?null:"");let i=n.selectedLabels();y(2),Q(i)}},dependencies:[se,oe,me,re,E],encapsulation:2,changeDetection:0})}return o})();export{F as a,tt as b};
